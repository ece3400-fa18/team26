<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>ECE 3400 Team 26</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Kaushan+Script' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700' rel='stylesheet' type='text/css'>

    <!-- Custom styles for this template -->
    <link href="css/agency.css" rel="stylesheet">

  </head>

  <body id="page-top">

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="index.html">Home</a>
        
      </div>
    </nav>

    <!-- Header -->
     <div class="pagehead">
      <div class="container">
        <h2>  </h2>
      </div>
    </div> 

    <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto">
            <div class="lab-page">
              <!-- Project Details Go Here -->
              <h2 class="text-uppercase text-left">Lab 4: FPGA and Shape Detection</h2>
              <p class="item-intro text-muted"> 
              In this lab we split into two teams to develop an FPGA module capable of detecting basic shapes from a camera input, and pass this information on to the Arduino. This device will be mounted on the robot to identify these shapes on the walls of the maze.</p>

              <h3> Pre-Lab: PLL </h3>
              <p> In the pre-lab, we learned key things about the FPGA we are using, the DE0-Nano, and the camera we are using, the OV670. Knowing these facts will allow us to perform image processing. <br>
              Embedded memory on the FPGA is 74.25 kB; this is the maximum size of the buffer. Since the camera has 640x480 pixels at full resolution, with a maximum of 3 bytes per a pixel, neither color resolution nor resolution can be used at full capacity. Each entry in the ram has a minimum size of 8 bits, so the maximum number of entries for the minimum size is 76032.<br>
              Of the available pixel formats, the RGB565 (16bits/pixel) format provides the most information on the base colors making up each pixel.
              In order to convert that pixel format to be accepted by the VGA module, (RGB565 to RGB332), we will use the following diagram:<br>
              [insert image]
              Based on the timing diagrams on page 7 of the camera data sheet, we will sample on the positive edge of HREF.
              <br>

              </p>
              
              <h3> Arduino Team</h3>
              <p> Nathalia and Vini worked on the arduino team. </p>
              Materials Used:<br>
              &emsp; - OV7670 Camera <br>
              &emsp; - Arduino Uno <br>
              &emsp; - DE0-Nano FPGA board <br>
		    
		<h5> Camera Set Up:Registers</h5>
		    We began by looking through the documentation for the registers that were related to six main functionalities: 1)resetting the registers 2)scaling 3)using external clock as internatl 4)pixel resolution 5)color bar 6)vertical and mirror image manupilation. After determining the relevant resistors and their addresses (please see table for details), we defined these at the top of the code. We then sought the values needed to enable the desired properties -- enable scaling, enable colorbar, ect. (These are marked by bold numbers in the third column). We then converted the values from binary to hex and obtained the 'write' values for all registers. In the write key register function, we began by resetting registers to their original values before writing the enable values. 
		    
		    As the reading and writing address of the camera differs by the value of the last bit (0 for write and 1 for read) we defined the camera address to the first seven bits, the last bit was dependant on whether the function calling the address was for reading or writing. 


              <h5> Camera Set Up: Wiring To FPGA</h5>
		    We intially struggled with creating the proper connections between the FPGA board and the OV7670 Camera, as in the documentation, the diagram for GPIO-0 is to the left of GPIO-1 and the first pin for both GPIO beds is at the top. However, on the FPGA board, the GPIO-1 is to the left of GPIO-0 and the first pin for GPIO-1 is at the bottom of the board, diagonal to the first pin of GPIO-0. 
		
							
		<h5> Communicating with FPGA </h5>


<br>
              <h3> FPGA Team </h3>
              <p> Joyce and Priya worked on the FPGA </p>
	      Materials Used:<br>
              &emsp; - DE0-Nano FPGA board <br>
              &emsp; - VGA adapter <br>
		    

              <h5>Set Up </h5>
		    

<br>

		    
							<h3> Work Distribution </h3>
              <p> The Lab 4 Work Distribution is as follows: <br> 
                  &emsp; - Nathalia and Vini worked on the arduino team <br>
                  &emsp; - Joyce and Priya worked on the FPGA team <br>
                  The Lab 4 Report Work Distribution is as follows: <br>
                  &emsp; - Nathalia and Vini worked on the arduino write up <br>
                  &emsp; - Joyce and Priya worked on the FPGA write up <br>
                  &emsp; - Joyce and Priya filmed videos, Nathalia edited and uploaded videos <br>
                  The website work distribution is as follows: <br>
                  &emsp; - Nathalia: Website Set Up and Maintenance<br>
              </p>

    <!-- Footer -->
    <footer>
      <div class="container">
        <div class="row">
          <div class="col-md-4">
            <span class="copyright">Copyright &copy; Your Website 2018</span>
          </div>
          <div class="col-md-4">
            <ul class="list-inline social-buttons">
              <li class="list-inline-item">
                <a href="#">
                  <i class="fab fa-twitter"></i>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="#">
                  <i class="fab fa-facebook-f"></i>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="#">
                  <i class="fab fa-linkedin-in"></i>
                </a>
              </li>
            </ul>
          </div>
          <div class="col-md-4">
            <ul class="list-inline quicklinks">
              <li class="list-inline-item">
                <a href="#">Privacy Policy</a>
              </li>
              <li class="list-inline-item">
                <a href="#">Terms of Use</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </footer>

 

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Contact form JavaScript -->
    <script src="js/jqBootstrapValidation.js"></script>
    <script src="js/contact_me.js"></script>

    <!-- Custom scripts for this template -->
    <script src="js/agency.min.js"></script>

  </body>

</html>
