<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>ECE 3400 Team 26</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Kaushan+Script' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700' rel='stylesheet' type='text/css'>

    <!-- Custom styles for this template -->
    <link href="css/agency.css" rel="stylesheet">

  </head>

  <body id="page-top">

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
      <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="index.html">Home</a>
        
      </div>
    </nav>

    <!-- Header -->
     <div class="pagehead">
      <div class="container">
        <h2>  </h2>
      </div>
    </div> 

    <div class="container">
        <div class="row">
          <div class="col-lg-8 mx-auto">
            <div class="lab-page">
              <!-- Project Details Go Here -->
              <h2 class="text-uppercase text-left">Lab 3: System Integration and Radio Communication</h2>
              <p class="item-intro text-muted"> 
              In this lab we integrated the systems from milestones 1 and 2. The robot will start at a 660Hz tone, autonomously navigate a small maze, and send the maze information from the sensors on the robot to a base station using radios. The base station will display the maze information</p>

              <!--<h3> Pre-Lab: Encoding Maze Information </h3>
              <p>
              </p>-->
              
              <h3> Radio Communication Team</h3>
              <p> Priya and Nathalia worked on the radio integration </p>
              Materials Used:<br>
              &emsp; - 2 Nordic nRF24L01+ tranceivers <br>
              &emsp; - 2 Arduino Unos <br>
              &emsp; - 2 radio breakout boards with headers <br>
              <p>
              </p>            
              Getting Started: <br>
              <p>We plugged the radios into the arduinos. Instead of using the 3.3V pin on the arduino, we connected the radio directly to a 3.3V Power Source. We then downloaded the RF24 Arduino Library. In this library there is a sketch called “Getting Started”. We replaced this sketch with the “Getting Started” sketch from the course GitHub repository for Lab 4.</p>

              <!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto;border:solid gray;border-width:.1em .1em .1em .8em;padding:.2em .6em;"><pre style="margin: 0; line-height: 125%"><span style="color: #888888">#include &lt;SPI.h&gt;</span>
<span style="color: #888888">#include &quot;nRF24L01.h&quot;</span>
<span style="color: #888888">#include &quot;RF24.h&quot;</span>
<span style="color: #888888">#include &quot;printf.h&quot;</span>

<span style="color: #333333">//</span> Radio pipe addresses <span style="color: #008800; font-weight: bold">for</span> the <span style="color: #0000DD; font-weight: bold">2</span> nodes to communicate<span style="color: #333333">.</span>
const uint64_t pipes[<span style="color: #0000DD; font-weight: bold">2</span>] <span style="color: #333333">=</span> { <span style="color: #005588; font-weight: bold">0x0000000070</span>LL, <span style="color: #005588; font-weight: bold">0x0000000071</span>LL };
</pre></div>

              <p>
              </p>

              <p>In this sketch, we modified the identifier numbers for the two pipes to the ones assigned for our team. We calculated our pin numbers using 2(3D + N) + X. For our team, D = 3, N=26. Therefore, we got the numbers 2(3*3 + 26) + 0 = 70 and 2(3*3+26) + 1= 71. <br>
              We then tested the code to see if our 2 arduinos could communicate with each other properly. In the first part of the video below, we can see that we can switch which arduino is transmitting and which is receiving. After confirming that it worked, we also moved the arduinos further apart to make sure the communication would still work for a distance of ~10 feet. </p>


		      <p>
              </p>

              Sending Maze Information: <br>
              <p> First, we sent wireless information over the radio.<br>
              Then we designed a protocol for data sent between the robot and the base station. The following describes the representation of each bit and its translation:<br>
              Each message is 1-byte </p>

              <img class="img-fluid d-block mx-auto" width="777" height="88" src="./img/lab3/table_of_data_values.PNG" alt="">

              <p>
              </p>

              Base Station-to-GUI Transmission: <br>
              <p>
              </p>
		    
              [video coming soon...]

              <h3> Robot Systems Integration Team </h3>
              <br>

              <p>In this lab we integrated all the components from previous labs and milestones. This included: the start functionality (robot starts after 660Hz tone is played); IR sensing (stop if another robot which emits 6.08 kHz is in collision path, but ignore decoys which emit 18 kHz); line following (with self correction); wall detection (avoiding running into walls).</p>

              <img class="img-fluid d-block mx-auto" width="777" height="88" src="./img/lab3/initial_fsm.PNG" alt="">

              <p>As seen in the diagram above, all conditions (presence of other robots, walls, and color of terrain) are checked continuously at the baud rate, except the start signal. The start signal is checked at the beginning of the main loop: if the signal is detected, the variable started (that was initialized to 0) is set to 1. The rest of the code is inside a the while loop with the condition started: while(started). This way the robot is unable to move or react until the 660Hz signal has played, but the signal only needs to play once.</p>
              Materials Used:<br>
              &emsp; - Robot <br>
              &emsp; - Decoy <br>
              &emsp; - 660Hz tone generator <br>
              &emsp; - walls <br>
              <p>
              </p>

              Integration Overview: <br>
              <p>We began by testing and tweaking each of the functionalities from previous labs.</p>


    <!-- Footer -->
    <footer>
      <div class="container">
        <div class="row">
          <div class="col-md-4">
            <span class="copyright">Copyright &copy; Your Website 2018</span>
          </div>
          <div class="col-md-4">
            <ul class="list-inline social-buttons">
              <li class="list-inline-item">
                <a href="#">
                  <i class="fab fa-twitter"></i>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="#">
                  <i class="fab fa-facebook-f"></i>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="#">
                  <i class="fab fa-linkedin-in"></i>
                </a>
              </li>
            </ul>
          </div>
          <div class="col-md-4">
            <ul class="list-inline quicklinks">
              <li class="list-inline-item">
                <a href="#">Privacy Policy</a>
              </li>
              <li class="list-inline-item">
                <a href="#">Terms of Use</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </footer>

 

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Contact form JavaScript -->
    <script src="js/jqBootstrapValidation.js"></script>
    <script src="js/contact_me.js"></script>

    <!-- Custom scripts for this template -->
    <script src="js/agency.min.js"></script>

  </body>

</html>
